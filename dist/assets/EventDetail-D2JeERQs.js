import{c as C,r as d,a as Ie,u as Fe,j as e,E as Me,C as D,b as J,X as Le}from"./index-BqPgAfae.js";import{O as T,g as H,h as W,L as Ue}from"./OperatorsHeader-Dj7zqjB8.js";import{C as I}from"./ConfirmModal-CInEEuKR.js";import{M as Ae}from"./map-pin-Dz1gmhn-.js";import{S as De}from"./save-CNFOxb7Z.js";/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=C("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=C("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=C("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=C("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=C("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);function ss(){var U,A;const l=window.location.pathname.replace("/operators/events/",""),[t,x]=d.useState(null),[q,P]=d.useState(!0),[m,c]=d.useState(!1),[ze,Be]=d.useState(""),[j,S]=d.useState({candidate_email:"",essay:"",contact_info:""}),[z,B]=d.useState({}),[K,E]=d.useState(null),[v,b]=d.useState([]),[O,Y]=d.useState(new Set),[Ke,$]=d.useState({}),[p,u]=d.useState({isOpen:!1}),o=Ie(),{email:i,userRoles:g}=Fe(),w=d.useCallback(s=>{window.history.pushState({},"",s),window.dispatchEvent(new PopStateEvent("popstate")),window.scrollTo({top:0,behavior:"instant"})},[]);d.useEffect(()=>{(async()=>{if(!l||!i){P(!1);return}try{P(!0);const n=await(await fetch(`/api/operators/events/${l}?email=${encodeURIComponent(i)}`)).json();n.ok&&(x(n.event),n.event.vote_summary&&$(n.event.vote_summary),n.event.state==="OPEN"&&i&&ue(l,i))}catch(a){console.error("Failed to fetch event:",a)}finally{P(!1)}})()},[l,i]);const Z=async()=>{c(!0);try{const a=await(await fetch(`/api/operators/events/${l}/rsvp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,action:"rsvp"})})).json();if(a.ok){const r=await(await fetch(`/api/operators/events/${l}?email=${encodeURIComponent(i)}`)).json();r.ok&&(x(r.event),o.success("RSVP successful"))}else o.error(a.error||"Failed to RSVP")}catch{o.error("Failed to RSVP. Please try again.")}finally{c(!1)}},F=d.useCallback(s=>!s||!s.event_date||!s.start_time?!1:(new Date(`${s.event_date}T${s.start_time}`)-new Date)/(1e3*60*60)>24,[]),X=async()=>{u({isOpen:!0,title:"Cancel RSVP",message:"Are you sure you want to cancel your RSVP?",onConfirm:Q,variant:"default"})},Q=async()=>{c(!0);try{const a=await(await fetch(`/api/operators/events/${l}/rsvp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,action:"cancel"})})).json();if(a.ok){const r=await(await fetch(`/api/operators/events/${l}?email=${encodeURIComponent(i)}`)).json();r.ok&&(x(r.event),o.success("RSVP cancelled successfully"))}else o.error(a.error||"Failed to cancel RSVP")}catch{o.error("Failed to cancel RSVP. Please try again.")}finally{c(!1)}},ee=async s=>{s.preventDefault(),c(!0);try{const n=await(await fetch("/api/operators/candidates/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,event_id:l,...j})})).json();if(n.ok){S({candidate_email:"",essay:"",contact_info:""});const h=await(await fetch(`/api/operators/events/${l}?email=${encodeURIComponent(i)}`)).json();h.ok&&(x(h.event),o.success("Candidate submitted successfully"))}else o.error(n.error||"Failed to submit candidate")}catch{o.error("Failed to submit candidate. Please try again.")}finally{c(!1)}},se=async s=>{c(!0);try{const n=await(await fetch(`/api/operators/candidates/${s}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})})).json();if(n.ok){const h=await(await fetch(`/api/operators/events/${l}?email=${encodeURIComponent(i)}`)).json();h.ok&&(x(h.event),o.success("Candidate approved successfully"))}else o.error(n.error||"Failed to approve candidate")}catch{o.error("Failed to approve candidate. Please try again.")}finally{c(!1)}},te=async s=>{u({isOpen:!0,title:"Remove RSVP",message:`Are you sure you want to remove ${s} from this event?`,onConfirm:()=>ae(s),variant:"danger"})},ae=async s=>{c(!0);try{const n=await(await fetch(`/api/operators/events/${l}/remove-rsvp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,target_email:s})})).json();if(n.ok){const h=await(await fetch(`/api/operators/events/${l}?email=${encodeURIComponent(i)}`)).json();h.ok&&(x(h.event),o.success("RSVP removed successfully"))}else o.error(n.error||"Failed to remove RSVP")}catch{o.error("Failed to remove RSVP. Please try again.")}finally{c(!1)}},ne=async s=>{c(!0);try{const n=await(await fetch(`/api/operators/events/${l}/promote-waitlist`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,target_email:s})})).json();if(n.ok){const h=await(await fetch(`/api/operators/events/${l}?email=${encodeURIComponent(i)}`)).json();h.ok&&(x(h.event),o.success("Waitlist promoted successfully"))}else o.error(n.error||"Failed to promote from waitlist")}catch{o.error("Failed to promote from waitlist. Please try again.")}finally{c(!1)}},re=async()=>{u({isOpen:!0,title:"Start Event",message:"Are you sure you want to start this event? This will enable voting and check-ins.",onConfirm:oe,variant:"default"})},oe=async()=>{c(!0);try{const a=await(await fetch(`/api/operators/events/${l}/open`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})})).json();if(a.ok){const r=await(await fetch(`/api/operators/events/${l}?email=${encodeURIComponent(i)}`)).json();r.ok&&(x(r.event),o.success("Event started successfully"))}else o.error(a.error||"Failed to open event")}catch{o.error("Failed to open event. Please try again.")}finally{c(!1)}},ie=async()=>{u({isOpen:!0,title:"Close Event",message:"Are you sure you want to close this event? This will finalize all outcomes and cannot be undone.",onConfirm:le,variant:"danger"})},le=async()=>{c(!0);try{const a=await(await fetch(`/api/operators/events/${l}/close`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})})).json();if(a.ok){const r=await(await fetch(`/api/operators/events/${l}?email=${encodeURIComponent(i)}`)).json();r.ok&&(x(r.event),o.success("Event closed successfully"))}else o.error(a.error||"Failed to close event")}catch{o.error("Failed to close event. Please try again.")}finally{c(!1)}},ce=async()=>{u({isOpen:!0,title:"Reopen Event",message:"Are you sure you want to reopen this event? This will unlock scenarios and allow voting/attendance again.",onConfirm:de,variant:"default"})},de=async()=>{c(!0);try{const a=await(await fetch(`/api/operators/events/${l}/reopen`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})})).json();if(a.ok){const r=await(await fetch(`/api/operators/events/${l}?email=${encodeURIComponent(i)}&_t=${Date.now()}`)).json();r.ok&&(x(r.event),console.log("Event reopened to OPEN. RSVP Closed:",r.event.rsvp_closed))}else{const n=a.details?`${a.error}: ${a.details}`:a.error||"Failed to reopen event";console.error("Reopen event error:",a),o.error(n)}}catch{o.error("Failed to reopen event. Please try again.")}finally{c(!1)}},me=async()=>{u({isOpen:!0,title:"Revert to LIVE",message:"Are you sure you want to revert this event to LIVE? This will unlock scenarios and allow editing before opening again.",onConfirm:pe,variant:"default"})},pe=async()=>{c(!0);try{const a=await(await fetch(`/api/operators/events/${l}/revert-to-live`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})})).json();if(a.ok){console.log("[UI] Revert to LIVE successful. Event from API:",a.event);const r=await(await fetch(`/api/operators/events/${l}?email=${encodeURIComponent(i)}&_t=${Date.now()}`)).json();r.ok?(console.log("[UI] Refreshed event data. State:",r.event.state,"RSVP Closed:",r.event.rsvp_closed),x(r.event),o.success("Event successfully reverted to LIVE. RSVPs are now enabled.")):(console.error("[UI] Failed to refresh event data:",r),o.warning("Event reverted but failed to refresh. Please reload the page."))}else{const n=a.details?`${a.error}: ${a.details}`:a.error||"Failed to revert event to LIVE";console.error("Revert to LIVE error:",a),o.error(n)}}catch{o.error("Failed to revert event to LIVE. Please try again.")}finally{c(!1)}},he=async()=>{u({isOpen:!0,title:"Announce Event",message:"Are you sure you want to announce this event? This will send email notifications to all Operators and approved Candidates.",onConfirm:xe,variant:"default"})},xe=async()=>{c(!0);try{const a=await(await fetch(`/api/operators/events/${l}/announce`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})})).json();if(a.ok)o.success(`Event announced successfully! Emails sent to ${a.sent} recipients.${a.failed>0?` (${a.failed} failed)`:""}`);else{const n=a.details?`${a.error}: ${a.details}`:a.error||"Failed to announce event";console.error("Announce event error:",a),o.error(n)}}catch{o.error("Failed to announce event. Please try again.")}finally{c(!1)}},ue=async(s,a)=>{try{const r=await(await fetch(`/api/operators/events/${s}?email=${encodeURIComponent(a)}`)).json();r.ok&&r.event.vote_summary&&$(r.event.vote_summary)}catch(n){console.error("Failed to fetch user votes:",n)}},k=async(s,a)=>{if(i===s){o.warning("You cannot vote for yourself");return}c(!0);try{const r=await(await fetch(`/api/operators/events/${l}/votes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,target_email:s,vote_value:a})})).json();if(r.ok){B(V=>({...V,[s]:a}));const y=await(await fetch(`/api/operators/events/${l}?email=${encodeURIComponent(i)}`)).json();y.ok&&(x(y.event),y.event.vote_summary&&$(y.event.vote_summary))}else o.error(r.error||"Failed to submit vote")}catch{o.error("Failed to submit vote. Please try again.")}finally{c(!1)}},ge=async(s,a)=>{c(!0);try{const r=await(await fetch(`/api/operators/events/${l}/check-in`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,target_email:s,action:a,cash_confirmed:!0})})).json();if(r.ok){const y=await(await fetch(`/api/operators/events/${l}?email=${encodeURIComponent(i)}`)).json();y.ok&&(x(y.event),o.success(`${a==="check_in"?"Checked in":a==="check_out"?"Checked out":a==="mark_no_show"?"Marked as no-show":"Action completed"} successfully`))}else o.error(r.error||`Failed to ${a}`)}catch{o.error(`Failed to ${a}. Please try again.`)}finally{c(!1)}},ye=d.useCallback(s=>{switch(s){case"LIVE":return"bg-blue-100 text-blue-800";case"OPEN":return"bg-green-100 text-green-800";case"CLOSED":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},[]),ve=d.useMemo(()=>t!=null&&t.host_location?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t.host_location)}`:"",[t==null?void 0:t.host_location]),M=d.useCallback(s=>{if(!s)return"";const[a,n]=s.split(":"),r=parseInt(a),h=r>=12?"PM":"AM";return`${r%12||12}:${n} ${h}`},[]);if(q)return e.jsxs("div",{className:"min-h-screen bg-[#fafafa]",children:[e.jsx(T,{active:"events",onNavigate:w}),e.jsx(I,{isOpen:p.isOpen,onClose:()=>u({isOpen:!1}),onConfirm:p.onConfirm,title:p.title,message:p.message,confirmText:p.confirmText,cancelText:p.cancelText,variant:p.variant||"default"}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:"Loading event..."})]});const fe=async()=>{u({isOpen:!0,title:"Close RSVP",message:"Are you sure you want to close RSVP? This will prevent new RSVPs and stop waitlist auto-promotion.",onConfirm:be,variant:"default"})},be=async()=>{c(!0);try{const a=await(await fetch(`/api/operators/events/${l}/close-rsvp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})})).json();if(a.ok){const r=await(await fetch(`/api/operators/events/${l}?email=${encodeURIComponent(i)}`)).json();r.ok&&(x(r.event),o.success("RSVP closed successfully"))}else o.error(a.error||"Failed to close RSVP")}catch{o.error("Failed to close RSVP. Please try again.")}finally{c(!1)}},je=async()=>{u({isOpen:!0,title:"Generate Scenarios",message:"Generate scenario insights for this event? This will analyze attendee profiles and current challenges to create realistic problem scenarios.",onConfirm:we,variant:"default"})},we=async()=>{c(!0);try{const a=await(await fetch(`/api/operators/events/${l}/generate-scenarios`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})})).json();if(a.ok){const r=await(await fetch(`/api/operators/events/${l}?email=${encodeURIComponent(i)}`)).json();r.ok?(x(r.event),o.success("Scenarios generated successfully")):o.error("Failed to refresh event data after generating scenarios")}else o.error(a.error||"Failed to generate scenarios")}catch{o.error("Failed to generate scenarios. Please try again.")}finally{c(!1)}},Ne=async()=>{c(!0);try{const a=await(await fetch(`/api/operators/events/${l}/scenarios`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,scenarios:v})})).json();if(a.ok){E(null),b([]);const r=await(await fetch(`/api/operators/events/${l}?email=${encodeURIComponent(i)}`)).json();r.ok?(x(r.event),o.success("Scenarios updated successfully")):o.error("Failed to refresh event data after updating scenarios")}else o.error(a.error||"Failed to update scenarios")}catch{o.error("Failed to update scenarios. Please try again.")}finally{c(!1)}},_e=()=>{t.scenarios&&t.scenarios.length>0&&(b([...t.scenarios]),E("all"))},Ce=()=>{E(null),b([])},L=(s,a)=>{if(a==="up"&&s>0){const n=[...v];[n[s],n[s-1]]=[n[s-1],n[s]],n[s].rank=s+1,n[s-1].rank=s,b(n)}else if(a==="down"&&s<v.length-1){const n=[...v];[n[s],n[s+1]]=[n[s+1],n[s]],n[s].rank=s+1,n[s+1].rank=s+2,b(n)}},Se=s=>{const a=new Set(O);a.has(s)?a.delete(s):a.add(s),Y(a)};if(!t)return e.jsxs("div",{className:"min-h-screen bg-[#fafafa]",children:[e.jsx(T,{active:"events",onNavigate:w}),e.jsx(I,{isOpen:p.isOpen,onClose:()=>u({isOpen:!1}),onConfirm:p.onConfirm,title:p.title,message:p.message,confirmText:p.confirmText,cancelText:p.cancelText,variant:p.variant||"default"}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:"Event not found"})]});const R=d.useMemo(()=>g.includes("super_admin"),[g]),f=d.useMemo(()=>g.includes("chief_operator")||g.includes("super_admin"),[g]),N=d.useMemo(()=>g.includes("operator"),[g]),_=d.useMemo(()=>g.includes("accountant"),[g]),ke=d.useMemo(()=>N||g.includes("candidate"),[N,g]),Re=d.useMemo(()=>N&&(t==null?void 0:t.state)==="LIVE"&&!(t!=null&&t.rsvp_closed),[N,t==null?void 0:t.state,t==null?void 0:t.rsvp_closed]),Pe=d.useMemo(()=>f&&(t==null?void 0:t.state)==="LIVE",[f,t==null?void 0:t.state]),Ee=d.useMemo(()=>f||_,[f,_]),Oe=d.useMemo(()=>R||f,[R,f]),$e=d.useMemo(()=>R||f||_,[R,f,_]),Ve=d.useMemo(()=>f&&(t==null?void 0:t.state)==="LIVE",[f,t==null?void 0:t.state]),Te=d.useMemo(()=>{if(!(t!=null&&t.event_date))return!1;const s=new Date(t.event_date),a=new Date;return a.setHours(0,0,0,0),s>=a},[t==null?void 0:t.event_date]);return e.jsxs("div",{className:"min-h-screen bg-[#fafafa]",children:[e.jsx(T,{active:"events",onNavigate:w}),e.jsx(I,{isOpen:p.isOpen,onClose:()=>u({isOpen:!1}),onConfirm:p.onConfirm,title:p.title,message:p.message,confirmText:p.confirmText,cancelText:p.cancelText,variant:p.variant||"default"}),e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("button",{onClick:()=>w("/operators/events"),className:"text-blue-600 hover:text-blue-700 mb-4",children:"← Back to Events"}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:t.title}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${ye(t.state)}`,children:t.state})]}),e.jsxs("p",{className:"text-gray-600",children:[new Date(t.event_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),t.start_time&&t.finish_time&&e.jsxs("span",{className:"ml-2",children:["• ",M(t.start_time)," - ",M(t.finish_time)]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Event Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Stake Amount:"}),e.jsxs("span",{className:"ml-2 text-gray-900",children:["$",t.stake_amount]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Max Seats:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:t.max_seats})]}),t.user_rsvp&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Your RSVP:"}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${t.user_rsvp.status==="confirmed"?"bg-green-100 text-green-800":t.user_rsvp.status==="waitlisted"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:t.user_rsvp.status})]})]})]}),(t.host_name||t.host_location)&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Host Information"}),e.jsxs("div",{className:"space-y-3",children:[t.host_name&&e.jsxs("div",{className:"flex items-center gap-3",children:[t.host_logo_url&&e.jsx("img",{src:t.host_logo_url,alt:"Host logo",className:"h-12 w-12 rounded"}),e.jsx("div",{children:e.jsx("p",{className:"font-medium text-gray-900",children:t.host_name})})]}),t.host_location&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ae,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-900",children:t.host_location}),e.jsxs("a",{href:ve(),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700 mt-1",children:["Get Directions ",e.jsx(Me,{className:"w-3 h-3"})]})]})]}),t.host_description&&e.jsx("p",{className:"text-gray-600 text-sm",children:t.host_description})]})]}),t.sponsor_name&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Sponsor Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t.sponsor_logo_url&&e.jsx("img",{src:t.sponsor_logo_url,alt:"Sponsor logo",className:"h-12 w-12 rounded"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.sponsor_name}),t.sponsor_website&&e.jsx("a",{href:t.sponsor_website,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-700",children:t.sponsor_website})]})]}),t.sponsor_phone&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["Phone: ",t.sponsor_phone]}),t.sponsor_pot_value>0&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["Pot Contribution: $",t.sponsor_pot_value]}),t.sponsor_description&&e.jsx("p",{className:"text-gray-600 text-sm",children:t.sponsor_description})]})]}),t.state==="LIVE"&&e.jsxs(e.Fragment,{children:[ke&&!t.user_rsvp&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"RSVP to Event"}),e.jsx("button",{onClick:Z,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:m?"Processing...":"RSVP"})]}),t.user_rsvp&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Your RSVP"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Status:"}),e.jsx("span",{className:`px-3 py-1 rounded text-sm font-medium ${t.user_rsvp.status==="confirmed"?"bg-green-100 text-green-800":t.user_rsvp.status==="waitlisted"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:t.user_rsvp.status})]}),F(t)&&e.jsx("button",{onClick:X,disabled:m,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:m?"Processing...":"Cancel RSVP"}),!F(t)&&t.user_rsvp&&e.jsx("p",{className:"text-sm text-gray-500",children:"Cancellation is only available more than 24 hours before the event starts."})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Rules & Requirements"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"To Become a Candidate:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Must be invited by an existing Operator"}),e.jsx("li",{children:"Must submit a 200+ word essay explaining why you want to join"}),e.jsx("li",{children:"Must provide contact information"}),e.jsx("li",{children:"Must be approved by a Chief Operator"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"To Become an Operator:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Must be an approved Candidate"}),e.jsx("li",{children:"Must attend an event and be checked in"}),e.jsx("li",{children:"Must receive votes from other Operators during the event"}),e.jsx("li",{children:"Must be promoted based on voting results and attendance"})]})]})]})]}),$e&&(t.state==="LIVE"||t.state==="OPEN")&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Topics & Scenarios"}),t.state==="LIVE"&&t.can_close_rsvp&&e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-3",children:"RSVP is currently open. Close RSVP to enable scenario generation."}),e.jsx("button",{onClick:fe,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:m?"Processing...":"Close RSVP"})]}),t.state==="LIVE"&&t.can_generate_scenarios&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("p",{className:"text-sm text-green-900 mb-3",children:"RSVP is closed. Generate AI-powered scenario insights based on attendee profiles and current challenges."}),e.jsx("button",{onClick:je,disabled:m,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:m?"Generating...":"Generate Scenario Insights"})]}),t.scenarios&&t.scenarios.length>0&&e.jsx("div",{className:"space-y-4",children:K==="all"&&t.state==="LIVE"?e.jsxs("div",{className:"space-y-4",children:[v.map((s,a)=>e.jsxs("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["Rank ",s.rank]}),e.jsx("button",{onClick:()=>L(a,"up"),disabled:a===0,className:"p-1 text-gray-600 hover:text-gray-900 disabled:opacity-30",children:e.jsx(D,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>L(a,"down"),disabled:a===v.length-1,className:"p-1 text-gray-600 hover:text-gray-900 disabled:opacity-30",children:e.jsx(J,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Scenario Title"}),e.jsx("input",{type:"text",value:s.scenario_title,onChange:n=>{const r=[...v];r[a].scenario_title=n.target.value,b(r)},className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Scenario Story"}),e.jsx("textarea",{value:s.scenario_story,onChange:n=>{const r=[...v];r[a].scenario_story=n.target.value,b(r)},rows:"5",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg",placeholder:"1 paragraph (3-5 sentences) describing the problem scenario"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Why This Fits"}),e.jsx("input",{type:"text",value:s.why_this_fits_this_room,onChange:n=>{const r=[...v];r[a].why_this_fits_this_room=n.target.value,b(r)},className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Starter Prompts (one per line)"}),e.jsx("textarea",{value:Array.isArray(s.starter_prompts)?s.starter_prompts.join(`
`):"",onChange:n=>{const r=[...v];r[a].starter_prompts=n.target.value.split(`
`).filter(h=>h.trim()),b(r)},rows:"4",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg"})]})]})]},s.id)),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:Ne,disabled:m,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4"}),"Save Changes"]}),e.jsx("button",{onClick:Ce,disabled:m,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:opacity-50",children:"Cancel"})]})]}):e.jsxs("div",{className:"space-y-4",children:[t.scenarios.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",s.rank]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.scenario_title}),s.is_locked&&e.jsx(G,{className:"w-4 h-4 text-gray-400",title:"Locked"})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-3 leading-relaxed",children:s.scenario_story}),e.jsxs("p",{className:"text-sm text-gray-700 italic mb-3 border-l-2 border-gray-300 pl-3",children:[e.jsx("span",{className:"font-medium",children:"Why this fits:"})," ",s.why_this_fits_this_room]})]})}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>Se(s.id),className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700",children:O.has(s.id)?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"w-4 h-4"}),"Hide Starter Prompts"]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-4 h-4"}),"Show Starter Prompts"]})}),O.has(s.id)&&e.jsx("div",{className:"mt-2 pl-4 border-l-2 border-gray-200",children:e.jsx("ul",{className:"space-y-1 text-sm text-gray-600",children:(Array.isArray(s.starter_prompts)?s.starter_prompts:[]).map((a,n)=>e.jsx("li",{className:"list-disc list-inside",children:a},n))})})]})]},s.id)),t.state==="LIVE"&&t.can_edit_scenarios&&!t.scenarios.some(s=>s.is_locked)&&e.jsxs("button",{onClick:_e,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4"}),"Edit Scenarios"]}),t.state==="OPEN"&&e.jsxs("p",{className:"text-sm text-gray-500 italic flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),"Scenarios are locked. They cannot be edited once the event is open."]})]})}),t.rsvp_closed&&!t.scenarios&&!t.can_generate_scenarios&&e.jsx("p",{className:"text-sm text-gray-500",children:"Scenarios have been generated. Refresh to view them."})]}),Re&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Invite Candidate"}),e.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Candidate Email *"}),e.jsx("input",{type:"email",required:!0,value:j.candidate_email,onChange:s=>S({...j,candidate_email:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"candidate@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Essay (200+ words) *"}),e.jsx("textarea",{required:!0,rows:"6",value:j.essay,onChange:s=>S({...j,essay:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"Why do you want to join The Operators?"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[j.essay.trim().split(/\s+/).filter(s=>s.length>0).length," words"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Info *"}),e.jsx("input",{type:"text",required:!0,value:j.contact_info,onChange:s=>S({...j,contact_info:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"Phone, LinkedIn, etc."})]}),e.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:m?"Submitting...":"Submit Candidate"})]})]}),Pe&&t.candidates&&t.candidates.length>0&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Pending Candidates"}),e.jsx("div",{className:"space-y-4",children:t.candidates.filter(s=>s.status==="pending").map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.candidate_email}),e.jsx("button",{onClick:()=>se(s.id),disabled:m,className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 disabled:opacity-50",children:"Approve"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.essay}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Contact: ",s.contact_info]})]},s.id))})]}),Oe&&t.rsvps&&t.rsvps.length>0&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Manage RSVPs"}),t.rsvp_closed&&e.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 text-sm font-medium rounded",children:"RSVPs Closed"})]}),t.rsvps.filter(s=>s.status==="confirmed").length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:["Confirmed (",t.rsvps.filter(s=>s.status==="confirmed").length,")"]}),e.jsx("div",{className:"space-y-2",children:t.rsvps.filter(s=>s.status==="confirmed").map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.user_email}),e.jsxs("p",{className:"text-xs text-gray-500",children:["RSVP'd: ",new Date(s.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),e.jsx("button",{onClick:()=>te(s.user_email),disabled:m,className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 disabled:opacity-50",children:"Remove"})]},s.id))})]}),t.rsvps.filter(s=>s.status==="waitlisted").length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:["Waitlisted (",t.rsvps.filter(s=>s.status==="waitlisted").length,")"]}),e.jsx("div",{className:"space-y-2",children:t.rsvps.filter(s=>s.status==="waitlisted").sort((s,a)=>new Date(s.created_at)-new Date(a.created_at)).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-yellow-200 bg-yellow-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.user_email}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Waitlisted: ",new Date(s.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),e.jsx("button",{onClick:()=>ne(s.user_email),disabled:m,className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 disabled:opacity-50",children:"Promote"})]},s.id))})]}),t.rsvps.filter(s=>s.status==="confirmed").length===0&&t.rsvps.filter(s=>s.status==="waitlisted").length===0&&e.jsx("p",{className:"text-gray-500 text-sm",children:"No RSVPs yet."})]})]}),t.state==="OPEN"&&e.jsxs(e.Fragment,{children:[N&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Voting"}),t.remaining_votes!==null&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("span",{className:"font-medium",children:"Remaining Votes:"})," ",t.remaining_votes," / 10"]})}),t.rsvps&&t.rsvps.filter(s=>s.status==="confirmed"||s.status==="attended").length>0?e.jsx("div",{className:"space-y-3",children:t.rsvps.filter(s=>(s.status==="confirmed"||s.status==="attended")&&s.user_email!==i).map(s=>{var r;const a=((r=t.vote_summary)==null?void 0:r[s.user_email])||{upvotes:0,downvotes:0},n=z[s.user_email]||null;return e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.user_email}),e.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[e.jsxs("span",{className:"text-sm text-green-600",children:["↑ ",a.upvotes]}),e.jsxs("span",{className:"text-sm text-red-600",children:["↓ ",a.downvotes]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>k(s.user_email,1),onKeyDown:W(()=>k(s.user_email,1)),disabled:m||t.remaining_votes===0,className:`p-2 rounded-lg ${n===1?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600 hover:bg-green-50"} disabled:opacity-50`,"aria-label":H(s.user_email,1,n),"aria-pressed":n===1,children:e.jsx(Ge,{className:"w-5 h-5","aria-hidden":"true"})}),e.jsx("button",{onClick:()=>k(s.user_email,-1),onKeyDown:W(()=>k(s.user_email,-1)),disabled:m||t.remaining_votes===0,className:`p-2 rounded-lg ${n===-1?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600 hover:bg-red-50"} disabled:opacity-50`,"aria-label":H(s.user_email,-1,n),"aria-pressed":n===-1,children:e.jsx(We,{className:"w-5 h-5","aria-hidden":"true"})})]})]},s.id)})}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No attendees to vote on yet."})]}),_&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Check-In Management"}),t.rsvps&&t.rsvps.length>0?e.jsx("div",{className:"space-y-3",children:t.rsvps.map(s=>{var y;const a=(y=t.attendance)==null?void 0:y.find(V=>V.user_email===s.user_email),n=(a==null?void 0:a.checked_in)||!1,r=(a==null?void 0:a.marked_no_show)||!1,h=(a==null?void 0:a.checked_out_at)||!1;return e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.user_email}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n&&!h&&e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-800 rounded",children:"Checked In"}),r&&e.jsx("span",{className:"text-xs px-2 py-1 bg-red-100 text-red-800 rounded",children:"No Show"}),h&&e.jsx("span",{className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded",children:"Checked Out"}),!n&&!r&&e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-800 rounded",children:"Not Checked In"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!n&&!r&&e.jsxs("button",{onClick:()=>handleCheckIn(s.user_email,"check_in"),disabled:m,className:"px-3 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center gap-1",children:[e.jsx(Je,{className:"w-4 h-4"}),"Check In"]}),!n&&!r&&e.jsxs("button",{onClick:()=>handleCheckIn(s.user_email,"mark_no_show"),disabled:m,className:"px-3 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-1",children:[e.jsx(Le,{className:"w-4 h-4"}),"No Show"]}),n&&!h&&e.jsxs("button",{onClick:()=>{u({isOpen:!0,title:"Check Out Attendee",message:`Mark ${att.user_email} as checked out (early departure)?`,onConfirm:()=>ge(att.user_email,"check_out"),variant:"default"})},disabled:m,className:"px-3 py-2 bg-yellow-600 text-white text-sm rounded-lg hover:bg-yellow-700 disabled:opacity-50 flex items-center gap-1",children:[e.jsx(Ue,{className:"w-4 h-4"}),"Check Out"]})]})]},s.id)})}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No RSVPs to manage yet."})]})]}),t.state==="CLOSED"&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Event Outcomes"}),t.roi_winner&&e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("p",{className:"font-medium text-green-900 mb-2",children:"ROi Winner:"}),e.jsx("p",{className:"text-lg font-semibold text-green-800 mb-2",children:t.roi_winner.business_name||(t.roi_winner.winner_email?t.roi_winner.winner_email.split("@")[0].replace(/\./g," ").replace(/\b\w/g,s=>s.toUpperCase()):"Unknown")}),t.roi_winner.pot_amount_won!==null&&t.roi_winner.pot_amount_won!==void 0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-green-300",children:[e.jsx("p",{className:"text-sm font-medium text-green-700 mb-1",children:"Pot Won:"}),e.jsxs("p",{className:"text-2xl font-bold text-green-800",children:["$",t.roi_winner.pot_amount_won.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),t.roi_winner.net_score!==void 0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-green-300",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-700 font-medium",children:"Net Score"}),e.jsx("p",{className:"text-green-800 font-semibold",children:t.roi_winner.net_score})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-700 font-medium",children:"Upvote Ratio"}),e.jsxs("p",{className:"text-green-800 font-semibold",children:[(parseFloat(t.roi_winner.upvote_ratio||0)*100).toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-700 font-medium",children:"Total Votes"}),e.jsx("p",{className:"text-green-800 font-semibold",children:t.roi_winner.total_votes})]})]})})]}),t.promotions&&t.promotions.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 mb-2",children:"Promotions:"}),t.promotions.map(s=>e.jsxs("div",{className:"text-sm text-gray-600",children:[s.candidate_email,": ",s.promoted?"Promoted":"Not Promoted"]},s.id))]})]})]}),e.jsxs("div",{className:"space-y-6",children:[Ee&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Event Actions"}),e.jsxs("div",{className:"space-y-3",children:[t.state==="LIVE"&&e.jsxs(e.Fragment,{children:[Ve&&Te&&e.jsx("button",{onClick:()=>w(`/operators/events/${l}/edit`),className:"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50",children:"Edit Event"}),e.jsx("button",{onClick:he,disabled:m,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"Announce Event"}),e.jsx("button",{onClick:re,disabled:m,className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:"Start Event"})]}),t.state==="OPEN"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:me,disabled:m,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"Revert to LIVE"}),e.jsx("button",{onClick:ie,disabled:m,className:"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:"Close Event"})]}),t.state==="CLOSED"&&e.jsx("button",{onClick:ce,disabled:m,className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:"Reopen Event"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"RSVPs"}),t.rsvp_closed&&e.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs font-medium rounded",children:"Closed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Confirmed:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[((U=t.rsvps)==null?void 0:U.filter(s=>s.status==="confirmed").length)||0,"/",t.max_seats]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Waitlisted:"}),e.jsx("span",{className:"font-medium text-gray-900",children:((A=t.rsvps)==null?void 0:A.filter(s=>s.status==="waitlisted").length)||0})]})]})]})]})]})]})]})}export{ss as default};
//# sourceMappingURL=EventDetail-D2JeERQs.js.map
